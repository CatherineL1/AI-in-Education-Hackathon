import React from 'react';
import { Card, CardContent, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { MessageCircle, Calendar, MapPin, Sparkles } from 'lucide-react';
import { motion } from 'framer-motion';


export default function CharacterCard({ character, onTalkToCharacter }) {
 // Generate avatar using DiceBear API
 const avatarUrl = `https://api.dicebear.com/7.x/bottts/svg?seed=${character.id}&backgroundColor=b6e3f4,c0aede,d1d4f9&scale=85`;
  return (
   <motion.div
     whileHover={{ y: -5, scale: 1.02 }}
     transition={{ duration: 0.3 }}
   >
     <Card className="group overflow-hidden border-2 border-amber-100 hover:border-amber-300 transition-all duration-300 hover:shadow-2xl bg-gradient-to-br from-white to-amber-50/30">
       <CardHeader className="p-0">
         <div className="relative h-48 bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center overflow-hidden">
           <div className="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmNzliMDAiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDE0YzAgMi4yMS0xLjc5IDQtNCA0cy00LTEuNzktNC00IDEuNzktNCA0LTQgNCAxLjc5IDQgNHptMCAzMmMwIDIuMjEtMS43OSA0LTQgNHMtNC0xLjc5LTQtNCAxLjc5LTQgNC00IDQgMS43OSA0IDR6bS0zMi0xNmMwIDIuMjEtMS43OSA0LTQgNHMtNC0xLjc5LTQtNCAxLjc5LTQgNC00IDQgMS43OSA0IDR6bTMyIDBjMCAyLjIxLTEuNzkgNC00IDRzLTQtMS43OS00LTQgMS43OS00IDQtNCA0IDEuNzkgNCA0em0xNiAxNmMwIDIuMjEtMS43OSA0LTQgNHMtNC0xLjc5LTQtNCAxLjc5LTQgNC00IDQgMS43OSA0IDR6bS0xNi0zMmMwIDIuMjEtMS43OSA0LTQgNHMtNC0xLjc5LTQtNCAxLjc5LTQgNC00IDQgMS43OSA0IDR6Ii8+PC9nPjwvZz48L3N2Zz4=')] opacity-50" />
           <motion.div
             whileHover={{ scale: 1.1, rotate: 5 }}
             transition={{ duration: 0.3 }}
           >
             <img
               src={avatarUrl}
               alt={character.name}
               className="w-32 h-32 relative z-10"
             />
           </motion.div>
          
           {/* AI Badge */}
           <div className="absolute top-3 right-3 bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center gap-1 shadow-lg">
             <Sparkles className="w-3 h-3" />
             AI-Powered
           </div>
         </div>
       </CardHeader>
       <CardContent className="p-6 space-y-4">
         <div>
           <h3 className="text-2xl font-bold text-gray-900 mb-1">{character.name}</h3>
           <Badge className="bg-amber-600 text-white hover:bg-amber-700">
             {character.role}
           </Badge>
         </div>
        
         <div className="space-y-2 text-sm text-gray-600">
           <div className="flex items-center gap-2">
             <Calendar className="w-4 h-4 text-amber-600" />
             <span>{character.lifespan}</span>
           </div>
           <div className="flex items-center gap-2">
             <MapPin className="w-4 h-4 text-amber-600" />
             <span>{character.region}</span>
           </div>
         </div>
        
         <p className="text-sm text-gray-700 leading-relaxed line-clamp-3">
           {character.bio}
         </p>


         {character.personality && (
           <div className="bg-purple-50 border border-purple-200 rounded-lg p-3">
             <p className="text-xs text-purple-800 italic">
               "{character.speaking_style || character.personality}"
             </p>
           </div>
         )}
        
         <Button
           onClick={() => onTalkToCharacter(character)}
           className="w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-semibold shadow-md hover:shadow-lg transition-all group-hover:scale-105"
         >
           <MessageCircle className="w-4 h-4 mr-2" />
           Talk to {character.name.split(' ')[0]}
